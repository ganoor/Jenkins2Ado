<?xml version='1.1' encoding='UTF-8'?><flow-definition plugin="workflow-job@1145.v7f2433caa07f">  <actions>    <org.jenkinsci.plugins.pipeline.modeldefinition.actions.DeclarativeJobAction plugin="pipeline-model-definition@1.7.1"/>    <org.jenkinsci.plugins.pipeline.modeldefinition.actions.DeclarativeJobPropertyTrackerAction plugin="pipeline-model-definition@1.7.1">      <jobProperties>        <string>jenkins.model.BuildDiscarderProperty</string>      </jobProperties>      <triggers/>      <parameters>        <string>APP_Podman_Image</string>        <string>APP_Master_Port</string>        <string>Ip</string>        <string>DB_Port</string>        <string>DB_Podman_Image</string>        <string>APP_Worker_Port</string>      </parameters>      <options/>    </org.jenkinsci.plugins.pipeline.modeldefinition.actions.DeclarativeJobPropertyTrackerAction>  </actions>  <description>API Integration Testing</description>  <keepDependencies>false</keepDependencies>  <properties>    <jenkins.model.BuildDiscarderProperty>      <strategy class="hudson.tasks.LogRotator">        <daysToKeep>-1</daysToKeep>        <numToKeep>10</numToKeep>        <artifactDaysToKeep>-1</artifactDaysToKeep>        <artifactNumToKeep>-1</artifactNumToKeep>      </strategy>    </jenkins.model.BuildDiscarderProperty>    <hudson.model.ParametersDefinitionProperty>      <parameterDefinitions>        <hudson.model.StringParameterDefinition>          <name>Ip</name>          <description>Enter the ip of server in which DMAP backend is running</description>          <defaultValue>localhost</defaultValue>          <trim>false</trim>        </hudson.model.StringParameterDefinition>        <hudson.model.StringParameterDefinition>          <name>DB_Port</name>          <description>Enter the service port of server in which DMAP DB backend is running</description>          <defaultValue>7002</defaultValue>          <trim>false</trim>        </hudson.model.StringParameterDefinition>        <hudson.model.StringParameterDefinition>          <name>APP_Master_Port</name>          <description>Enter the serviece port of server in which DMAP APP backend is running</description>          <defaultValue>5001</defaultValue>          <trim>false</trim>        </hudson.model.StringParameterDefinition>        <hudson.model.StringParameterDefinition>          <name>APP_Worker_Port</name>          <description>Enter the serviece port of server in which DMAP APP backend is running</description>          <defaultValue>5005</defaultValue>          <trim>false</trim>        </hudson.model.StringParameterDefinition>        <hudson.model.StringParameterDefinition>          <name>DB_Podman_Image</name>          <description>Enter the podman image name in which DMAP DB backend is running</description>          <defaultValue>quay.io/newtglobaldev/ngdmapo/dmap_azure_blob_podman_dev:v8.1.4.1</defaultValue>          <trim>false</trim>        </hudson.model.StringParameterDefinition>        <hudson.model.StringParameterDefinition>          <name>APP_Podman_Image</name>          <description>Enter the podman image name in which DMAP App services is running</description>          <defaultValue>quay.io/newtglobaldev/ngdmapo/dmap_app_migration_azure_blob_podman_dev:v1.1.4.2</defaultValue>          <trim>false</trim>        </hudson.model.StringParameterDefinition>      </parameterDefinitions>    </hudson.model.ParametersDefinitionProperty>    <org.jenkinsci.plugins.workflow.job.properties.PipelineTriggersJobProperty>      <triggers/>    </org.jenkinsci.plugins.workflow.job.properties.PipelineTriggersJobProperty>  </properties>  <definition class="org.jenkinsci.plugins.workflow.cps.CpsFlowDefinition" plugin="workflow-cps@2.82">    <script>pipeline {	 agent {        node {            label &apos;build_slave_podman&apos;        }    }		environment {		APPLICATION_NAME = &quot;DMAP_APP_RestAssured_Api_Test&quot;		//NOTIFYUSERS = &apos;dmap_dev@newtglobalcorp.com&apos;		NOTIFYUSERS = &apos;rajivm@newtglobalcorp.com&apos;		PATH = &quot;/home/newtdba/.nvm/versions/node/v18.3.0/bin:/home/newtdba/.local/bin:/home/newtdba/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/newtdba/.nvm/versions/node/v16.18.1/bin/ng:/var/lib/jenkins/sonar-scanner-4.8.1.3023/bin:/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.362.b09-4.el9.x86_64/bin/java:/home/newtdba/.local/bin/bandit:/opt/sonar-scanner/bin:$PATH&quot;        JAVA_HOME = &apos;/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.362.b09-4.el9.x86_64&apos;	   	BUILD_DETAILS = &quot;&lt;BR&gt;Job Name: ${env.JOB_NAME} &lt;BR&gt;Build Number: ${env.BUILD_NUMBER} &lt;BR&gt;Build URL: ${BUILD_URL}&quot;	}		parameters {        string(name: &apos;Ip&apos;, defaultValue: &apos;localhost&apos;, description: &apos;Enter the ip of server in which DMAP backend is running&apos;)		string(name: &apos;DB_Port&apos;, defaultValue: &apos;7002&apos;, description: &apos;Enter the service port of server in which DMAP DB backend is running&apos;)		string(name: &apos;APP_Master_Port&apos;, defaultValue: &apos;5001&apos;, description: &apos;Enter the serviece port of server in which DMAP APP backend is running&apos;)		string(name: &apos;APP_Worker_Port&apos;, defaultValue: &apos;5005&apos;, description: &apos;Enter the serviece port of server in which DMAP APP backend is running&apos;)		string(name: &apos;DB_Podman_Image&apos;, defaultValue: &apos;quay.io/newtglobaldev/ngdmapo/dmap_azure_blob_podman_dev:v8.1.4.1&apos;, description: &apos;Enter the podman image name in which DMAP DB backend is running&apos;)		string(name: &apos;APP_Podman_Image&apos;, defaultValue: &apos;quay.io/newtglobaldev/ngdmapo/dmap_app_migration_azure_blob_podman_dev:v1.1.4.2&apos;, description: &apos;Enter the podman image name in which DMAP App services is running&apos;)    }		options {        timestamps()        timeout(time: 4, unit: &apos;HOURS&apos;)        buildDiscarder(logRotator(numToKeepStr: &apos;10&apos;))    }		stages {		stage (&quot;Checkout&quot;) {			steps {			    deleteDir()				echo &quot;Checkout the code&quot;				sh &quot;pwd&quot;				git branch: &quot;DE-1132&quot;, credentialsId: &apos;Kavya_1709&apos;, url: &apos;https://github.com/newtglobalgit/DMAP_APP_API_INTEGRATION_TEST.git&apos;			}		}		stage (&quot;Start DMAP Backend&quot;) {		    steps {		        script {		            if (params.Ip == &apos;localhost&apos;) {		                echo &quot;---------------------Creating build container---------------------------&quot;						sh &quot;podman run -d -it -p 8091:8080 -p ${params.APP_Master_Port}:5000 --name=dmap_master_app_api_testing ${params.APP_Podman_Image}&quot;						sh &quot;podman run -d -it -p 8092:8080 -p ${params.APP_Worker_Port}:5000 --name=dmap_worker_app_api_testing ${params.APP_Podman_Image}&quot;												 sh &quot;podman run -d -it -p 5433:5432 -p 9090:8080 -p ${params.DB_Port}:5002 -e UI_PORT=9090 -e SERVICE_PORT=${params.DB_Port}  -e DB_PORT=5433 --name=run_app_api_testing ${params.DB_Podman_Image}&quot;										        echo &quot;------------------Wait 60 minutes to start backend-------------------------------&quot;                        //sleep 3600                        sleep 1800		            }		        }			}		}				stage (&quot;Running Tests&quot;) {			steps {				//echo &quot;---------------------Configuration Ip and Port---------------------------&quot;				//sh &quot;sed -i &apos;s/localhost/${params.Ip}/g&apos; /home/devadmin/workspace/DMAP/Execute_Api_Test_Cases/RestAssured/src/test/java/com/utility/ApplicationConstants.java&quot;                //sh &quot;sed -i &apos;s/5002/${params.Port}/g&apos; /home/devadmin/workspace/DMAP/Execute_Api_Test_Cases/RestAssured/src/test/java/com/utility/ApplicationConstants.java&quot;				echo &quot;------------------------Running testcases--------------------------------&quot;				//sh &quot;mvn -f /home/devadmin/workspace/DMAP/DMAP_APP_RestAssured_Test_Cases/RestAssured clean test&quot;			//	sh &quot;pwd&quot;			//	sh &quot;mvn -f RestAssured clean test&quot;				sh &quot;pwd&quot;				sh &quot;mvn -f /home/newtdba/workspace/DMAP/6_DMAP_APP_Podman_RestAssured_Test_Cases/RestAssured clean test&quot;				echo &quot;------------------------Executing Done--------------------------------&quot;				sh &quot;pwd&quot;				sh &quot;cp RestAssured/target/surefire-reports/emailable-report.html DMAP_APP_RestAssured_Report.html&quot;			}		}				stage (&quot;Remove Container&quot;) {			steps {			    script {		            if (params.Ip == &apos;localhost&apos;) {			           sh &quot;podman stop run_app_api_testing&quot;			           sh &quot;podman rm -f run_app_api_testing&quot;												sh &quot;podman stop dmap_master_app_api_testing&quot;			            sh &quot;podman rm -f dmap_master_app_api_testing&quot;						sh &quot;podman stop dmap_worker_app_api_testing&quot;			            sh &quot;podman rm -f dmap_worker_app_api_testing&quot;									            echo &quot;------------------Api testing container removed successfully------------------&quot;		            }   		        }			}		}  			}		post {        always {            emailext attachmentsPattern: &apos;DMAP_APP_RestAssured_Report.html	&apos;,            subject: &quot;Jenkins Job Report For ${APPLICATION_NAME} - ${currentBuild.currentResult}&quot;,			body: &quot;BUILD DETAILS: ${BUILD_DETAILS}      BUILD STATUS: ${currentBuild.currentResult}&quot;,			to: &quot;${NOTIFYUSERS}&quot;        }    }	}</script>    <sandbox>true</sandbox>  </definition>  <triggers/>  <disabled>false</disabled></flow-definition>